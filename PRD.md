# Agent Kanban - Product Requirements Document

## 1. ê°œìš”

### 1.1 ì œí’ˆ ë¹„ì „
ì—¬ëŸ¬ í„°ë¯¸ë„ì—ì„œ ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” Claude ì—ì´ì „íŠ¸ë“¤ì„ ì¹¸ë°˜ ë³´ë“œ í˜•ì‹ìœ¼ë¡œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” í†µí•© ëŒ€ì‹œë³´ë“œ ë„êµ¬.

### 1.2 ë¬¸ì œ ì •ì˜
- ì—¬ëŸ¬ í„°ë¯¸ë„ì—ì„œ Claude ì—ì´ì „íŠ¸ë¥¼ ë™ì‹œì— ì‹¤í–‰í•  ë•Œ ê° ì—ì´ì „íŠ¸ì˜ ìƒíƒœë¥¼ íŒŒì•…í•˜ê¸° ì–´ë ¤ì›€
- Sub-agent í˜¸ì¶œ ì‹œ ì „ì²´ì ì¸ ì‘ì—… íë¦„ì„ ì‹œê°ì ìœ¼ë¡œ ì¶”ì í•˜ê¸° í˜ë“¦
- ì—ì´ì „íŠ¸ ì‘ì—…ì˜ ì‹œì‘/ì¢…ë£Œ/ì§„í–‰ ìƒí™©ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•  ë°©ë²•ì´ ì—†ìŒ

### 1.3 ëª©í‘œ
- ëª¨ë“  í™œì„± Claude ì—ì´ì „íŠ¸ë¥¼ í•œ í™”ë©´ì—ì„œ ëª¨ë‹ˆí„°ë§
- ì‹¤ì‹œê°„ ìƒíƒœ ì—…ë°ì´íŠ¸ë¡œ ìµœì‹  ì •ë³´ ì œê³µ
- ì§ê´€ì ì¸ ì¹¸ë°˜ ë³´ë“œ UIë¡œ ì‘ì—… íë¦„ ì‹œê°í™”

---

## 2. ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­

### 2.1 ëŒ€ìƒ ì‚¬ìš©ì
- ì—¬ëŸ¬ Claude ì—ì´ì „íŠ¸ë¥¼ ë™ì‹œì— ìš´ì˜í•˜ëŠ” ê°œë°œì
- ë³µì¡í•œ ë©€í‹° ì—ì´ì „íŠ¸ ì›Œí¬í”Œë¡œìš°ë¥¼ ê´€ë¦¬í•˜ëŠ” ì‚¬ìš©ì

### 2.2 í•µì‹¬ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

#### FR-1: ì—ì´ì „íŠ¸ ë“±ë¡ ë° ë°œê²¬
- ìƒˆë¡œìš´ Claude ì—ì´ì „íŠ¸ê°€ ì‹œì‘ë˜ë©´ ìë™ìœ¼ë¡œ ê°ì§€
- ìˆ˜ë™ìœ¼ë¡œ ì—ì´ì „íŠ¸ ë“±ë¡ ê°€ëŠ¥
- Sub-agent í˜¸ì¶œ ì‹œ ë¶€ëª¨-ìì‹ ê´€ê³„ ì¶”ì 

#### FR-2: ì¹¸ë°˜ ë³´ë“œ ë·°
- ì»¬ëŸ¼ êµ¬ì„±:
  - **Idle**: ëŒ€ê¸° ì¤‘ì¸ ì—ì´ì „íŠ¸
  - **Working**: ì‘ì—… ìˆ˜í–‰ ì¤‘ì¸ ì—ì´ì „íŠ¸
  - **Waiting**: ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” ì™¸ë¶€ ì‘ë‹µ ëŒ€ê¸° ì¤‘
  - **Completed**: ì‘ì—… ì™„ë£Œëœ ì—ì´ì „íŠ¸
  - **Error**: ì˜¤ë¥˜ ë°œìƒí•œ ì—ì´ì „íŠ¸

#### FR-3: ì‹¤ì‹œê°„ ìƒíƒœ ì—…ë°ì´íŠ¸
- ì—ì´ì „íŠ¸ ìƒíƒœ ë³€ê²½ ì‹œ ì¦‰ì‹œ UI ë°˜ì˜ (< 1ì´ˆ)
- WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ í†µì‹ 
- ì—°ê²° ëŠê¹€ ì‹œ ìë™ ì¬ì—°ê²°

#### FR-4: ì—ì´ì „íŠ¸ ìƒì„¸ ì •ë³´
- ì—ì´ì „íŠ¸ ID ë° ì´ë¦„
- í˜„ì¬ ì‘ì—… ì„¤ëª…
- ì‹œì‘ ì‹œê°„ ë° ê²½ê³¼ ì‹œê°„
- ë§ˆì§€ë§‰ í™œë™ ì‹œê°„
- í„°ë¯¸ë„/ì„¸ì…˜ ì •ë³´
- ë¶€ëª¨ ì—ì´ì „íŠ¸ ì •ë³´ (sub-agentì¸ ê²½ìš°)

#### FR-5: ì—ì´ì „íŠ¸ ê³„ì¸µ êµ¬ì¡° ì‹œê°í™”
- Sub-agent í˜¸ì¶œ ê´€ê³„ë¥¼ íŠ¸ë¦¬ í˜•íƒœë¡œ í‘œì‹œ
- ë¶€ëª¨-ìì‹ ì—ì´ì „íŠ¸ ê°„ ì—°ê²°ì„  í‘œì‹œ

#### FR-6: í•„í„°ë§ ë° ê²€ìƒ‰
- ìƒíƒœë³„ í•„í„°ë§
- ì—ì´ì „íŠ¸ ì´ë¦„/IDë¡œ ê²€ìƒ‰
- íŠ¹ì • ì‘ì—… ìœ í˜•ë³„ í•„í„°ë§

---

## 3. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 3.1 êµ¬ì„± ìš”ì†Œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Frontend (React)                         â”‚
â”‚                   Kanban Board Dashboard                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ WebSocket
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Backend Server (Node.js)                   â”‚
â”‚              - WebSocket Server                              â”‚
â”‚              - Agent Registry                                â”‚
â”‚              - State Management                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼             â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent 1    â”‚ â”‚  Agent 2    â”‚ â”‚  Agent N    â”‚
â”‚  (Terminal) â”‚ â”‚  (Terminal) â”‚ â”‚  (Terminal) â”‚
â”‚  Reporter   â”‚ â”‚  Reporter   â”‚ â”‚  Reporter   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ê¸°ìˆ  ìŠ¤íƒ

#### Frontend
- **React 18+** with TypeScript
- **Tailwind CSS** for styling
- **Zustand** for state management
- **Socket.io-client** for WebSocket
- **react-beautiful-dnd** or **@dnd-kit** for drag-and-drop (ì„ íƒì )

#### Backend
- **Node.js** with Express
- **Socket.io** for WebSocket server
- **SQLite** for ìƒíƒœ ì˜ì†ì„± (ì„ íƒì )

#### Agent Reporter
- **Python** ë˜ëŠ” **Node.js** ê²½ëŸ‰ í´ë¼ì´ì–¸íŠ¸
- Claude Code hooks í™œìš© ë˜ëŠ” ë…ë¦½ ìŠ¤í¬ë¦½íŠ¸

### 3.3 í†µì‹  í”„ë¡œí† ì½œ

#### Agent â†’ Server ë©”ì‹œì§€
```typescript
interface AgentMessage {
  type: 'register' | 'status_update' | 'heartbeat' | 'deregister';
  agentId: string;
  parentAgentId?: string;  // sub-agentì¸ ê²½ìš°
  timestamp: number;
  payload: {
    status: 'idle' | 'working' | 'waiting' | 'completed' | 'error';
    taskDescription?: string;
    progress?: number;  // 0-100
    metadata?: Record<string, any>;
  };
}
```

#### Server â†’ Frontend ë©”ì‹œì§€
```typescript
interface ServerMessage {
  type: 'agent_list' | 'agent_update' | 'agent_removed';
  agents?: Agent[];
  agent?: Agent;
  agentId?: string;
}

interface Agent {
  id: string;
  name: string;
  status: AgentStatus;
  taskDescription: string;
  startTime: number;
  lastActivity: number;
  parentAgentId?: string;
  children: string[];
  terminalInfo: {
    pid?: number;
    cwd?: string;
    sessionId?: string;
  };
}
```

---

## 4. ìƒì„¸ ê¸°ëŠ¥ ëª…ì„¸

### 4.1 ì—ì´ì „íŠ¸ ë“±ë¡ ë©”ì»¤ë‹ˆì¦˜

#### Option A: Claude Code Hooks í™œìš©
```json
// .claude/settings.json
{
  "hooks": {
    "onStart": "node reporter.js register",
    "onTaskStart": "node reporter.js working",
    "onTaskEnd": "node reporter.js idle",
    "onExit": "node reporter.js deregister"
  }
}
```

#### Option B: í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜
```bash
export AGENT_KANBAN_SERVER=http://localhost:3001
claude --with-reporter
```

#### Option C: íŒŒì¼ ì‹œìŠ¤í…œ ê°ì‹œ
- íŠ¹ì • ë””ë ‰í† ë¦¬ì— ì—ì´ì „íŠ¸ ìƒíƒœ íŒŒì¼ ì‘ì„±
- ì„œë²„ê°€ íŒŒì¼ ë³€ê²½ ê°ì§€í•˜ì—¬ ìƒíƒœ ì—…ë°ì´íŠ¸

### 4.2 ì¹¸ë°˜ ë³´ë“œ UI ëª…ì„¸

#### ì¹´ë“œ êµ¬ì„± ìš”ì†Œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– Agent-abc123                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ Task: Implementing login feature   â”‚
â”‚                                    â”‚
â”‚ â±ï¸ 5m 23s elapsed                  â”‚
â”‚ ğŸ“ /projects/myapp                 â”‚
â”‚                                    â”‚
â”‚ [Sub-agents: 2]  [View Details]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì»¬ëŸ¼ ë ˆì´ì•„ì›ƒ
- ê° ì»¬ëŸ¼ì€ ì ‘ê¸°/í¼ì¹˜ê¸° ê°€ëŠ¥
- ì»¬ëŸ¼ ë‚´ ì¹´ë“œ ìˆ˜ ë°°ì§€ í‘œì‹œ
- ì»¬ëŸ¼ë³„ ìƒ‰ìƒ ì½”ë”©

### 4.3 ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë™ì‘

1. ì—ì´ì „íŠ¸ ì‹œì‘ â†’ Working ì»¬ëŸ¼ì— ìƒˆ ì¹´ë“œ ì• ë‹ˆë©”ì´ì…˜ê³¼ í•¨ê»˜ ì¶”ê°€
2. ì‘ì—… ì™„ë£Œ â†’ Completed ì»¬ëŸ¼ìœ¼ë¡œ ì¹´ë“œ ì´ë™ ì• ë‹ˆë©”ì´ì…˜
3. ì—ì´ì „íŠ¸ ì¢…ë£Œ â†’ ì¹´ë“œ í˜ì´ë“œì•„ì›ƒ í›„ ì œê±° (ë˜ëŠ” Completedì— ìœ ì§€)
4. ì—°ê²° ëŠê¹€ â†’ ì¹´ë“œì— ê²½ê³  í‘œì‹œ

---

## 5. API ëª…ì„¸

### 5.1 REST API

#### GET /api/agents
ëª¨ë“  ë“±ë¡ëœ ì—ì´ì „íŠ¸ ëª©ë¡ ë°˜í™˜

#### GET /api/agents/:id
íŠ¹ì • ì—ì´ì „íŠ¸ ìƒì„¸ ì •ë³´

#### DELETE /api/agents/:id
ì—ì´ì „íŠ¸ ìˆ˜ë™ ì œê±°

#### GET /api/agents/:id/history
ì—ì´ì „íŠ¸ ìƒíƒœ ë³€ê²½ ì´ë ¥

### 5.2 WebSocket Events

| Event | Direction | Description |
|-------|-----------|-------------|
| `connect` | Clientâ†’Server | í´ë¼ì´ì–¸íŠ¸ ì—°ê²° |
| `subscribe` | Clientâ†’Server | ì—ì´ì „íŠ¸ ì—…ë°ì´íŠ¸ êµ¬ë… |
| `agent:register` | Agentâ†’Server | ì—ì´ì „íŠ¸ ë“±ë¡ |
| `agent:update` | Agentâ†’Server | ìƒíƒœ ì—…ë°ì´íŠ¸ |
| `agent:heartbeat` | Agentâ†’Server | ì—°ê²° ìœ ì§€ |
| `agents:sync` | Serverâ†’Client | ì „ì²´ ì—ì´ì „íŠ¸ ëª©ë¡ ë™ê¸°í™” |
| `agent:changed` | Serverâ†’Client | ê°œë³„ ì—ì´ì „íŠ¸ ë³€ê²½ ì•Œë¦¼ |

---

## 6. ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 6.1 ì„±ëŠ¥
- ë™ì‹œ ëª¨ë‹ˆí„°ë§ ì—ì´ì „íŠ¸: ìµœëŒ€ 50ê°œ
- UI ì—…ë°ì´íŠ¸ ì§€ì—°: < 500ms
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: < 200MB (ì„œë²„)

### 6.2 ì•ˆì •ì„±
- WebSocket ì¬ì—°ê²° ìë™í™”
- ì„œë²„ ì¬ì‹œì‘ ì‹œ ì—ì´ì „íŠ¸ ìƒíƒœ ë³µêµ¬
- ì—ì´ì „íŠ¸ ë¹„ì •ìƒ ì¢…ë£Œ ê°ì§€ (heartbeat timeout)

### 6.3 ì‚¬ìš©ì„±
- ë°˜ì‘í˜• ë””ìì¸ (ë°ìŠ¤í¬í†± ìš°ì„ )
- ë‹¤í¬ ëª¨ë“œ ì§€ì›
- í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì§€ì›

---

## 7. í”„ë¡œì íŠ¸ êµ¬ì¡°

```
agent-kanban/
â”œâ”€â”€ frontend/                 # React í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ KanbanBoard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ KanbanColumn.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AgentCard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ AgentDetailModal.tsx
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â””â”€â”€ useWebSocket.ts
â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”‚   â””â”€â”€ agentStore.ts
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ agent.ts
â”‚   â”‚   â””â”€â”€ App.tsx
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ server/                   # Node.js ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ websocket.ts
â”‚   â”‚   â””â”€â”€ agentRegistry.ts
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ reporter/                 # ì—ì´ì „íŠ¸ ë¦¬í¬í„° í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ reporter.js          # Node.js ë²„ì „
â”‚   â””â”€â”€ reporter.py          # Python ë²„ì „
â”œâ”€â”€ PRD.md
â””â”€â”€ README.md
```

---

## 8. ë§ˆì¼ìŠ¤í†¤

### Phase 1: ê¸°ë³¸ ì¸í”„ë¼
- [ ] í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •
- [ ] WebSocket ì„œë²„ êµ¬í˜„
- [ ] ê¸°ë³¸ ì—ì´ì „íŠ¸ ë ˆì§€ìŠ¤íŠ¸ë¦¬
- [ ] ë¦¬í¬í„° í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„

### Phase 2: ì¹¸ë°˜ ë³´ë“œ UI
- [ ] ì¹¸ë°˜ ë³´ë“œ ë ˆì´ì•„ì›ƒ
- [ ] ì—ì´ì „íŠ¸ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
- [ ] ì‹¤ì‹œê°„ ìƒíƒœ ë°˜ì˜
- [ ] ê¸°ë³¸ ìŠ¤íƒ€ì¼ë§

### Phase 3: ê³ ê¸‰ ê¸°ëŠ¥
- [ ] ì—ì´ì „íŠ¸ ê³„ì¸µ êµ¬ì¡° ì‹œê°í™”
- [ ] í•„í„°ë§ ë° ê²€ìƒ‰
- [ ] ì—ì´ì „íŠ¸ ìƒì„¸ ëª¨ë‹¬
- [ ] ë‹¤í¬ ëª¨ë“œ

### Phase 4: ì•ˆì •í™”
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”
- [ ] ì„±ëŠ¥ ìµœì í™”
- [ ] ë¬¸ì„œí™”

---

## 9. ìœ„í—˜ ìš”ì†Œ ë° ëŒ€ì‘

| ìœ„í—˜ | ì˜í–¥ë„ | ëŒ€ì‘ ë°©ì•ˆ |
|------|--------|-----------|
| Claude Code hooks ì œì•½ | ë†’ìŒ | íŒŒì¼ ì‹œìŠ¤í…œ ê¸°ë°˜ ëŒ€ì•ˆ êµ¬í˜„ |
| ë‹¤ìˆ˜ ì—ì´ì „íŠ¸ ì„±ëŠ¥ ì €í•˜ | ì¤‘ê°„ | ê°€ìƒí™”ëœ ëª©ë¡ ë Œë”ë§ ì ìš© |
| WebSocket ì—°ê²° ë¶ˆì•ˆì • | ì¤‘ê°„ | ì¬ì—°ê²° ë¡œì§ ë° ìƒíƒœ ë³µêµ¬ êµ¬í˜„ |

---

## 10. ì„±ê³µ ì§€í‘œ

- ì—ì´ì „íŠ¸ ìƒíƒœ ë³€ê²½ ê°ì§€ìœ¨: > 99%
- UI ë°˜ì˜ ì§€ì—° ì‹œê°„: < 1ì´ˆ
- ì‚¬ìš©ì ë§Œì¡±ë„: ì§ê´€ì ì¸ ì—ì´ì „íŠ¸ ìƒíƒœ íŒŒì•… ê°€ëŠ¥
