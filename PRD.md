# Agent Kanban - Product Requirements Document

## 1. ê°œìš”

### 1.1 ì œí’ˆ ë¹„ì „
ì—¬ëŸ¬ í„°ë¯¸ë„ì—ì„œ ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” Claude ì—ì´ì „íŠ¸ë“¤ì„ ì¹¸ë°˜ ë³´ë“œ í˜•ì‹ìœ¼ë¡œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” í†µí•© ëŒ€ì‹œë³´ë“œ ë„êµ¬.

### 1.2 ë¬¸ì œ ì •ì˜
- ì—¬ëŸ¬ í„°ë¯¸ë„ì—ì„œ Claude ì—ì´ì „íŠ¸ë¥¼ ë™ì‹œì— ì‹¤í–‰í•  ë•Œ ê° ì—ì´ì „íŠ¸ì˜ ìƒíƒœë¥¼ íŒŒì•…í•˜ê¸° ì–´ë ¤ì›€
- Sub-agent í˜¸ì¶œ ì‹œ ì „ì²´ì ì¸ ì‘ì—… íë¦„ì„ ì‹œê°ì ìœ¼ë¡œ ì¶”ì í•˜ê¸° í˜ë“¦
- ì—ì´ì „íŠ¸ ì‘ì—…ì˜ ì‹œì‘/ì¢…ë£Œ/ì§„í–‰ ìƒí™©ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•  ë°©ë²•ì´ ì—†ìŒ
- **ì‘ì€ ì‹¤í–‰ê¹Œì§€ ëª¨ë‘ ì¹´ë“œí™”ë˜ë©´ ì¹¸ë°˜ ë³´ë“œê°€ ê³¼ë°€í•´ì§€ëŠ” ë¬¸ì œ**
- **ì§„í–‰ ìƒíƒœ ê°€ì‹œì„±ê³¼ ì´ë ¥/ê°ì‚¬ ë¡œê·¸ ê¸°ëŠ¥ì´ ëª¨ë‘ í•„ìš”í•¨**

### 1.3 ëª©í‘œ
- ëª¨ë“  í™œì„± Claude ì—ì´ì „íŠ¸ë¥¼ í•œ í™”ë©´ì—ì„œ ëª¨ë‹ˆí„°ë§
- ì‹¤ì‹œê°„ ìƒíƒœ ì—…ë°ì´íŠ¸ë¡œ ìµœì‹  ì •ë³´ ì œê³µ
- ì§ê´€ì ì¸ ì¹¸ë°˜ ë³´ë“œ UIë¡œ ì‘ì—… íë¦„ ì‹œê°í™”
- **í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹: ì„¸ì…˜ ëŒ€ì‹œë³´ë“œ + Task ê¸°ë°˜ ì´ë ¥ ê´€ë¦¬**

---

## 2. ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­

### 2.1 ëŒ€ìƒ ì‚¬ìš©ì
- ì—¬ëŸ¬ Claude ì—ì´ì „íŠ¸ë¥¼ ë™ì‹œì— ìš´ì˜í•˜ëŠ” ê°œë°œì
- ë³µì¡í•œ ë©€í‹° ì—ì´ì „íŠ¸ ì›Œí¬í”Œë¡œìš°ë¥¼ ê´€ë¦¬í•˜ëŠ” ì‚¬ìš©ì

### 2.2 í•µì‹¬ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

#### FR-1: ì—ì´ì „íŠ¸(ì„¸ì…˜) ë“±ë¡ ë° ë°œê²¬
- ìƒˆë¡œìš´ Claude ì—ì´ì „íŠ¸ê°€ ì‹œì‘ë˜ë©´ ìë™ìœ¼ë¡œ ê°ì§€
- ìˆ˜ë™ìœ¼ë¡œ ì—ì´ì „íŠ¸ ë“±ë¡ ê°€ëŠ¥
- Sub-agent í˜¸ì¶œ ì‹œ ë¶€ëª¨-ìì‹ ê´€ê³„ ì¶”ì 
- **ì—ì´ì „íŠ¸ = ì„¸ì…˜ ëŒ€ì‹œë³´ë“œ ì—­í•  (í˜„ì¬ ëª©í‘œ, ì§„í–‰ë¥ , ë¸”ë¡œì»¤, ë‹¤ìŒ ì•¡ì…˜, ìµœê·¼ ì´ë²¤íŠ¸ ìš”ì•½)**

#### FR-2: Task ìƒì„± ë° ê´€ë¦¬ (ì‹ ê·œ)
- **ê° í”„ë¡¬í”„íŠ¸ ì‹¤í–‰ = í•˜ë‚˜ì˜ Task ì¹´ë“œ ìƒì„±**
- TaskëŠ” ì‘ê³  ëª…í™•í•œ ë‹¨ìœ„ ("ì…ë ¥ â†’ ì‚°ì¶œë¬¼")
- Task ì»¬ëŸ¼ êµ¬ì„±:
  - **To do**: ì˜ˆì •ëœ ì‘ì—…
  - **Doing**: í˜„ì¬ ì§„í–‰ ì¤‘
  - **Done**: ì™„ë£Œë¨
  - **Failed**: ì‹¤íŒ¨/ì˜¤ë¥˜
- Task ì¹´ë“œì— í‘œì‹œí•  ì •ë³´:
  - Task ID ë° ì œëª© (í”„ë¡¬í”„íŠ¸ ìš”ì•½)
  - ì†Œì† ì—ì´ì „íŠ¸ (ì„¸ì…˜) ì •ë³´
  - ì‹œì‘/ì¢…ë£Œ ì‹œê°„
  - ìƒíƒœ ë° ê²°ê³¼ ìš”ì•½
  - ì¶œë ¥ë¬¼ ë§í¬ (ìˆëŠ” ê²½ìš°)

#### FR-3: ì¹¸ë°˜ ë³´ë“œ ë·° (í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹)
- **2ë‹¨ êµ¬ì¡°**:
  - **ìƒë‹¨: ì„¸ì…˜ ëŒ€ì‹œë³´ë“œ ì˜ì—­** (ì—ì´ì „íŠ¸/ì„¸ì…˜ë³„ ìš”ì•½ ì¹´ë“œ)
  - **í•˜ë‹¨: Task ì¹¸ë°˜ ë³´ë“œ** (ì‹¤ì œ ì‘ì—… íë¦„)
- ì„¸ì…˜ ëŒ€ì‹œë³´ë“œ ì¹´ë“œì— í‘œì‹œí•  ì •ë³´:
  - í˜„ì¬ ëª©í‘œ / ì „ì²´ ì§„í–‰ë¥ 
  - ë¸”ë¡œì»¤ (ìˆëŠ” ê²½ìš°)
  - ë‹¤ìŒ ì•¡ì…˜
  - ìµœê·¼ ì´ë²¤íŠ¸ 5ê°œ ìš”ì•½
- ì„¸ì…˜ ì¹´ë“œ ì»¬ëŸ¼:
  - **Active**: í˜„ì¬ í™œì„± ì„¸ì…˜
  - **Paused**: ì¼ì‹œ ì¤‘ì§€ëœ ì„¸ì…˜
  - **Finished**: ì¢…ë£Œëœ ì„¸ì…˜

#### FR-4: ì‹¤ì‹œê°„ ìƒíƒœ ì—…ë°ì´íŠ¸
- ì—ì´ì „íŠ¸/Task ìƒíƒœ ë³€ê²½ ì‹œ ì¦‰ì‹œ UI ë°˜ì˜ (< 1ì´ˆ)
- WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ í†µì‹ 
- ì—°ê²° ëŠê¹€ ì‹œ ìë™ ì¬ì—°ê²°

#### FR-5: ì—ì´ì „íŠ¸ ìƒì„¸ ì •ë³´ (ì„¸ì…˜ ëŒ€ì‹œë³´ë“œ)
- ì—ì´ì „íŠ¸ ID ë° ì´ë¦„
- **í˜„ì¬ ëª©í‘œ ë° ì „ì²´ ì§„í–‰ë¥ **
- **ë¸”ë¡œì»¤ ë° ë‹¤ìŒ ì•¡ì…˜**
- **ìµœê·¼ ì´ë²¤íŠ¸ 5ê°œ (Task ìƒì„±/ì™„ë£Œ ë“±)**
- ì‹œì‘ ì‹œê°„ ë° ê²½ê³¼ ì‹œê°„
- ë§ˆì§€ë§‰ í™œë™ ì‹œê°„
- í„°ë¯¸ë„/ì„¸ì…˜ ì •ë³´
- ë¶€ëª¨ ì—ì´ì „íŠ¸ ì •ë³´ (sub-agentì¸ ê²½ìš°)
- **ì†Œì† Task ëª©ë¡**

#### FR-6: Task ìƒì„¸ ì •ë³´ (ì‹ ê·œ)
- Task ID ë° ì œëª©
- ì†Œì† ì—ì´ì „íŠ¸ (ì„¸ì…˜)
- ì…ë ¥ í”„ë¡¬í”„íŠ¸
- ì¶œë ¥ ê²°ê³¼ ìš”ì•½
- ì‹œì‘/ì¢…ë£Œ ì‹œê°„
- ìƒíƒœ ë³€ê²½ ì´ë ¥

#### FR-7: ì—ì´ì „íŠ¸ ê³„ì¸µ êµ¬ì¡° ì‹œê°í™”
- Sub-agent í˜¸ì¶œ ê´€ê³„ë¥¼ íŠ¸ë¦¬ í˜•íƒœë¡œ í‘œì‹œ
- ë¶€ëª¨-ìì‹ ì—ì´ì „íŠ¸ ê°„ ì—°ê²°ì„  í‘œì‹œ
- **ì„¸ì…˜-Task ê´€ê³„ë„ ì‹œê°í™”**

#### FR-8: í•„í„°ë§ ë° ê²€ìƒ‰
- ìƒíƒœë³„ í•„í„°ë§ (ì„¸ì…˜/Task ê°ê°)
- ì—ì´ì „íŠ¸ ì´ë¦„/IDë¡œ ê²€ìƒ‰
- Task ì œëª©/ë‚´ìš©ìœ¼ë¡œ ê²€ìƒ‰
- íŠ¹ì • ì‘ì—… ìœ í˜•ë³„ í•„í„°ë§

---

## 3. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 3.1 êµ¬ì„± ìš”ì†Œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Frontend (React)                         â”‚
â”‚                   Kanban Board Dashboard                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ WebSocket
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Backend Server (Node.js)                   â”‚
â”‚              - WebSocket Server                              â”‚
â”‚              - Agent Registry                                â”‚
â”‚              - State Management                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼             â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent 1    â”‚ â”‚  Agent 2    â”‚ â”‚  Agent N    â”‚
â”‚  (Terminal) â”‚ â”‚  (Terminal) â”‚ â”‚  (Terminal) â”‚
â”‚  Reporter   â”‚ â”‚  Reporter   â”‚ â”‚  Reporter   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ê¸°ìˆ  ìŠ¤íƒ

#### Frontend
- **React 18+** with TypeScript
- **Tailwind CSS** for styling
- **Zustand** for state management
- **Socket.io-client** for WebSocket
- **react-beautiful-dnd** or **@dnd-kit** for drag-and-drop (ì„ íƒì )

#### Backend
- **Node.js** with Express
- **Socket.io** for WebSocket server
- **SQLite** for ìƒíƒœ ì˜ì†ì„± (ì„ íƒì )

#### Agent Reporter
- **Python** ë˜ëŠ” **Node.js** ê²½ëŸ‰ í´ë¼ì´ì–¸íŠ¸
- Claude Code hooks í™œìš© ë˜ëŠ” ë…ë¦½ ìŠ¤í¬ë¦½íŠ¸

### 3.3 í†µì‹  í”„ë¡œí† ì½œ

#### Agent â†’ Server ë©”ì‹œì§€
```typescript
// ì„¸ì…˜(ì—ì´ì „íŠ¸) ê´€ë ¨ ë©”ì‹œì§€
interface AgentMessage {
  type: 'register' | 'status_update' | 'heartbeat' | 'deregister';
  agentId: string;
  parentAgentId?: string;  // sub-agentì¸ ê²½ìš°
  timestamp: number;
  payload: {
    status: 'active' | 'paused' | 'finished';
    goal?: string;           // í˜„ì¬ ëª©í‘œ
    progress?: number;       // ì „ì²´ ì§„í–‰ë¥  0-100
    blocker?: string;        // í˜„ì¬ ë¸”ë¡œì»¤
    nextAction?: string;     // ë‹¤ìŒ ì•¡ì…˜
    metadata?: Record<string, any>;
  };
}

// Task ê´€ë ¨ ë©”ì‹œì§€ (ì‹ ê·œ)
interface TaskMessage {
  type: 'task_create' | 'task_update' | 'task_complete' | 'task_fail';
  taskId: string;
  agentId: string;  // ì†Œì† ì„¸ì…˜
  timestamp: number;
  payload: {
    title: string;              // í”„ë¡¬í”„íŠ¸ ìš”ì•½
    prompt?: string;            // ì…ë ¥ í”„ë¡¬í”„íŠ¸ ì „ë¬¸
    status: 'todo' | 'doing' | 'done' | 'failed';
    result?: string;            // ê²°ê³¼ ìš”ì•½
    outputLink?: string;        // ì¶œë ¥ë¬¼ ë§í¬
    metadata?: Record<string, any>;
  };
}
```

#### Server â†’ Frontend ë©”ì‹œì§€
```typescript
interface ServerMessage {
  type: 'agent_list' | 'agent_update' | 'agent_removed'
      | 'task_list' | 'task_update' | 'task_removed';
  agents?: Agent[];
  agent?: Agent;
  agentId?: string;
  tasks?: Task[];
  task?: Task;
  taskId?: string;
}

// ì„¸ì…˜(ì—ì´ì „íŠ¸) ë°ì´í„° ëª¨ë¸
interface Agent {
  id: string;
  name: string;
  status: 'active' | 'paused' | 'finished';
  goal: string;              // í˜„ì¬ ëª©í‘œ
  progress: number;          // ì „ì²´ ì§„í–‰ë¥  0-100
  blocker?: string;          // í˜„ì¬ ë¸”ë¡œì»¤
  nextAction?: string;       // ë‹¤ìŒ ì•¡ì…˜
  recentEvents: Event[];     // ìµœê·¼ ì´ë²¤íŠ¸ 5ê°œ
  startTime: number;
  lastActivity: number;
  parentAgentId?: string;
  children: string[];
  taskIds: string[];         // ì†Œì† Task ID ëª©ë¡
  terminalInfo: {
    pid?: number;
    cwd?: string;
    sessionId?: string;
  };
}

// Task ë°ì´í„° ëª¨ë¸ (ì‹ ê·œ)
interface Task {
  id: string;
  agentId: string;           // ì†Œì† ì„¸ì…˜
  title: string;             // í”„ë¡¬í”„íŠ¸ ìš”ì•½
  prompt: string;            // ì…ë ¥ í”„ë¡¬í”„íŠ¸ ì „ë¬¸
  status: 'todo' | 'doing' | 'done' | 'failed';
  result?: string;           // ê²°ê³¼ ìš”ì•½
  outputLink?: string;       // ì¶œë ¥ë¬¼ ë§í¬
  startTime: number;
  endTime?: number;
  statusHistory: StatusChange[];  // ìƒíƒœ ë³€ê²½ ì´ë ¥
}

interface Event {
  type: 'task_created' | 'task_completed' | 'task_failed' | 'status_changed';
  timestamp: number;
  description: string;
}

interface StatusChange {
  from: string;
  to: string;
  timestamp: number;
}
```

---

## 4. ìƒì„¸ ê¸°ëŠ¥ ëª…ì„¸

### 4.1 ì—ì´ì „íŠ¸ ë“±ë¡ ë©”ì»¤ë‹ˆì¦˜

#### Option A: Claude Code Hooks í™œìš©
```json
// .claude/settings.json
{
  "hooks": {
    "onStart": "node reporter.js register",
    "onTaskStart": "node reporter.js working",
    "onTaskEnd": "node reporter.js idle",
    "onExit": "node reporter.js deregister"
  }
}
```

#### Option B: í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜
```bash
export AGENT_KANBAN_SERVER=http://localhost:3001
claude --with-reporter
```

#### Option C: íŒŒì¼ ì‹œìŠ¤í…œ ê°ì‹œ
- íŠ¹ì • ë””ë ‰í† ë¦¬ì— ì—ì´ì „íŠ¸ ìƒíƒœ íŒŒì¼ ì‘ì„±
- ì„œë²„ê°€ íŒŒì¼ ë³€ê²½ ê°ì§€í•˜ì—¬ ìƒíƒœ ì—…ë°ì´íŠ¸

### 4.2 ì¹¸ë°˜ ë³´ë“œ UI ëª…ì„¸ (í•˜ì´ë¸Œë¦¬ë“œ ë ˆì´ì•„ì›ƒ)

#### ì „ì²´ ë ˆì´ì•„ì›ƒ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        â—€ ì„¸ì…˜ ëŒ€ì‹œë³´ë“œ ì˜ì—­ â–¶                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚ â”‚   ACTIVE (2)    â”‚ â”‚   PAUSED (1)    â”‚ â”‚  FINISHED (3)   â”‚            â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚            â”‚
â”‚ â”‚ â”‚Session-abc  â”‚ â”‚ â”‚ â”‚Session-xyz  â”‚ â”‚ â”‚ â”‚Session-old  â”‚ â”‚            â”‚
â”‚ â”‚ â”‚Goal: ë¡œê·¸ì¸ â”‚ â”‚ â”‚ â”‚Goal: API    â”‚ â”‚ â”‚ â”‚Goal: ë¦¬íŒ©í„° â”‚ â”‚            â”‚
â”‚ â”‚ â”‚Progress: 60%â”‚ â”‚ â”‚ â”‚Paused...    â”‚ â”‚ â”‚ â”‚Completed!   â”‚ â”‚            â”‚
â”‚ â”‚ â”‚Tasks: 3/5   â”‚ â”‚ â”‚ â”‚             â”‚ â”‚ â”‚ â”‚             â”‚ â”‚            â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚            â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        â—€ Task ì¹¸ë°˜ ë³´ë“œ â–¶                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚   TO DO (2)   â”‚ â”‚  DOING (1)    â”‚ â”‚   DONE (5)    â”‚ â”‚  FAILED (1)   â”‚â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚ â”‚ â”‚Task: API  â”‚ â”‚ â”‚ â”‚Task: Loginâ”‚ â”‚ â”‚ â”‚Task: DB   â”‚ â”‚ â”‚ â”‚Task: Auth â”‚ â”‚â”‚
â”‚ â”‚ â”‚@Session-abâ”‚ â”‚ â”‚ â”‚@Session-abâ”‚ â”‚ â”‚ â”‚@Session-abâ”‚ â”‚ â”‚ â”‚@Session-abâ”‚ â”‚â”‚
â”‚ â”‚ â”‚           â”‚ â”‚ â”‚ â”‚â±ï¸ 2m 30s  â”‚ â”‚ â”‚ â”‚âœ“ ì™„ë£Œ     â”‚ â”‚ â”‚ â”‚âœ— ì‹¤íŒ¨     â”‚ â”‚â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì„¸ì…˜ ì¹´ë“œ êµ¬ì„± ìš”ì†Œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– Session-abc123           [Active]â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ ğŸ¯ Goal: ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„           â”‚
â”‚ ğŸ“Š Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%        â”‚
â”‚                                    â”‚
â”‚ ğŸš§ Blocker: API ì‘ë‹µ ëŒ€ê¸° ì¤‘        â”‚
â”‚ â¡ï¸ Next: ì—ëŸ¬ í•¸ë“¤ë§ êµ¬í˜„           â”‚
â”‚                                    â”‚
â”‚ ğŸ“‹ Recent Events:                  â”‚
â”‚   â€¢ Task "DB ìŠ¤í‚¤ë§ˆ" ì™„ë£Œ (2ë¶„ ì „)  â”‚
â”‚   â€¢ Task "API ì—°ë™" ì‹œì‘ (5ë¶„ ì „)  â”‚
â”‚                                    â”‚
â”‚ [Tasks: 3/5]  [Sub-agents: 2]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Task ì¹´ë“œ êµ¬ì„± ìš”ì†Œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ Task-12345                [Doing]â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ Title: ë¡œê·¸ì¸ API ì—°ë™             â”‚
â”‚ ğŸ¤– Session: Session-abc123         â”‚
â”‚                                    â”‚
â”‚ â±ï¸ 2m 30s elapsed                  â”‚
â”‚ ğŸ“ Output: /src/api/login.ts       â”‚
â”‚                                    â”‚
â”‚ [View Prompt]  [View Result]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì»¬ëŸ¼ ë ˆì´ì•„ì›ƒ
- ì„¸ì…˜ ì»¬ëŸ¼: Active / Paused / Finished
- Task ì»¬ëŸ¼: To do / Doing / Done / Failed
- ê° ì»¬ëŸ¼ì€ ì ‘ê¸°/í¼ì¹˜ê¸° ê°€ëŠ¥
- ì»¬ëŸ¼ ë‚´ ì¹´ë“œ ìˆ˜ ë°°ì§€ í‘œì‹œ
- ì»¬ëŸ¼ë³„ ìƒ‰ìƒ ì½”ë”©
- **ì„¸ì…˜ë³„ Task í•„í„°ë§ ì§€ì›**

### 4.3 ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë™ì‘

#### ì„¸ì…˜ ì—…ë°ì´íŠ¸
1. ì„¸ì…˜ ì‹œì‘ â†’ Active ì»¬ëŸ¼ì— ìƒˆ ì¹´ë“œ ì• ë‹ˆë©”ì´ì…˜ê³¼ í•¨ê»˜ ì¶”ê°€
2. ì„¸ì…˜ ì¼ì‹œì •ì§€ â†’ Paused ì»¬ëŸ¼ìœ¼ë¡œ ì´ë™
3. ì„¸ì…˜ ì™„ë£Œ â†’ Finished ì»¬ëŸ¼ìœ¼ë¡œ ì´ë™
4. ì—°ê²° ëŠê¹€ â†’ ì¹´ë“œì— ê²½ê³  í‘œì‹œ

#### Task ì—…ë°ì´íŠ¸
1. Task ìƒì„± â†’ To do/Doing ì»¬ëŸ¼ì— ì¶”ê°€ (ìƒíƒœì— ë”°ë¼)
2. Task ì‹œì‘ â†’ Doing ì»¬ëŸ¼ìœ¼ë¡œ ì´ë™
3. Task ì™„ë£Œ â†’ Done ì»¬ëŸ¼ìœ¼ë¡œ ì´ë™
4. Task ì‹¤íŒ¨ â†’ Failed ì»¬ëŸ¼ìœ¼ë¡œ ì´ë™
5. **ì„¸ì…˜ ì¹´ë“œì˜ Recent Events ìë™ ì—…ë°ì´íŠ¸**
6. **ì„¸ì…˜ ì¹´ë“œì˜ Progress ìë™ ê³„ì‚° (ì™„ë£Œ Task / ì „ì²´ Task)**

---

## 5. API ëª…ì„¸

### 5.1 REST API

#### ì„¸ì…˜(ì—ì´ì „íŠ¸) API

##### GET /api/agents
ëª¨ë“  ë“±ë¡ëœ ì—ì´ì „íŠ¸(ì„¸ì…˜) ëª©ë¡ ë°˜í™˜

##### GET /api/agents/:id
íŠ¹ì • ì—ì´ì „íŠ¸ ìƒì„¸ ì •ë³´ (ì†Œì† Task í¬í•¨)

##### DELETE /api/agents/:id
ì—ì´ì „íŠ¸ ìˆ˜ë™ ì œê±°

##### GET /api/agents/:id/history
ì—ì´ì „íŠ¸ ìƒíƒœ ë³€ê²½ ì´ë ¥

##### PATCH /api/agents/:id
ì—ì´ì „íŠ¸ ìš”ì•½ ì •ë³´ ì—…ë°ì´íŠ¸ (goal, blocker, nextAction)

#### Task API (ì‹ ê·œ)

##### GET /api/tasks
ëª¨ë“  Task ëª©ë¡ ë°˜í™˜

##### GET /api/tasks?agentId=:agentId
íŠ¹ì • ì—ì´ì „íŠ¸ ì†Œì† Task ëª©ë¡

##### GET /api/tasks/:id
íŠ¹ì • Task ìƒì„¸ ì •ë³´

##### POST /api/tasks
ìƒˆ Task ìƒì„±

##### PATCH /api/tasks/:id
Task ìƒíƒœ/ê²°ê³¼ ì—…ë°ì´íŠ¸

##### DELETE /api/tasks/:id
Task ì‚­ì œ

##### GET /api/tasks/:id/history
Task ìƒíƒœ ë³€ê²½ ì´ë ¥

### 5.2 WebSocket Events

| Event | Direction | Description |
|-------|-----------|-------------|
| `connect` | Clientâ†’Server | í´ë¼ì´ì–¸íŠ¸ ì—°ê²° |
| `subscribe` | Clientâ†’Server | ì—ì´ì „íŠ¸/Task ì—…ë°ì´íŠ¸ êµ¬ë… |
| `agent:register` | Agentâ†’Server | ì—ì´ì „íŠ¸(ì„¸ì…˜) ë“±ë¡ |
| `agent:update` | Agentâ†’Server | ì„¸ì…˜ ìƒíƒœ/ìš”ì•½ ì—…ë°ì´íŠ¸ |
| `agent:heartbeat` | Agentâ†’Server | ì—°ê²° ìœ ì§€ |
| `agents:sync` | Serverâ†’Client | ì „ì²´ ì—ì´ì „íŠ¸ ëª©ë¡ ë™ê¸°í™” |
| `agent:changed` | Serverâ†’Client | ê°œë³„ ì—ì´ì „íŠ¸ ë³€ê²½ ì•Œë¦¼ |
| `task:create` | Agentâ†’Server | Task ìƒì„± |
| `task:update` | Agentâ†’Server | Task ìƒíƒœ ì—…ë°ì´íŠ¸ |
| `tasks:sync` | Serverâ†’Client | ì „ì²´ Task ëª©ë¡ ë™ê¸°í™” |
| `task:changed` | Serverâ†’Client | ê°œë³„ Task ë³€ê²½ ì•Œë¦¼ |
| `task:removed` | Serverâ†’Client | Task ì‚­ì œ ì•Œë¦¼ |

---

## 6. ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 6.1 ì„±ëŠ¥
- ë™ì‹œ ëª¨ë‹ˆí„°ë§ ì—ì´ì „íŠ¸: ìµœëŒ€ 50ê°œ
- UI ì—…ë°ì´íŠ¸ ì§€ì—°: < 500ms
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: < 200MB (ì„œë²„)

### 6.2 ì•ˆì •ì„±
- WebSocket ì¬ì—°ê²° ìë™í™”
- ì„œë²„ ì¬ì‹œì‘ ì‹œ ì—ì´ì „íŠ¸ ìƒíƒœ ë³µêµ¬
- ì—ì´ì „íŠ¸ ë¹„ì •ìƒ ì¢…ë£Œ ê°ì§€ (heartbeat timeout)

### 6.3 ì‚¬ìš©ì„±
- ë°˜ì‘í˜• ë””ìì¸ (ë°ìŠ¤í¬í†± ìš°ì„ )
- ë‹¤í¬ ëª¨ë“œ ì§€ì›
- í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì§€ì›

---

## 7. í”„ë¡œì íŠ¸ êµ¬ì¡°

```
agent-kanban/
â”œâ”€â”€ frontend/                 # React í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ HybridKanbanBoard.tsx    # í•˜ì´ë¸Œë¦¬ë“œ ë ˆì´ì•„ì›ƒ ë©”ì¸
â”‚   â”‚   â”‚   â”œâ”€â”€ SessionDashboard.tsx     # ì„¸ì…˜ ëŒ€ì‹œë³´ë“œ ì˜ì—­
â”‚   â”‚   â”‚   â”œâ”€â”€ SessionColumn.tsx        # ì„¸ì…˜ ì»¬ëŸ¼ (Active/Paused/Finished)
â”‚   â”‚   â”‚   â”œâ”€â”€ SessionCard.tsx          # ì„¸ì…˜ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ SessionDetailModal.tsx   # ì„¸ì…˜ ìƒì„¸ ëª¨ë‹¬
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskKanbanBoard.tsx      # Task ì¹¸ë°˜ ë³´ë“œ ì˜ì—­
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskColumn.tsx           # Task ì»¬ëŸ¼ (Todo/Doing/Done/Failed)
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskCard.tsx             # Task ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskDetailModal.tsx      # Task ìƒì„¸ ëª¨ë‹¬
â”‚   â”‚   â”‚   â””â”€â”€ ... (ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸)
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ useWebSocket.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useSessions.ts           # ì„¸ì…˜ ê´€ë ¨ í›…
â”‚   â”‚   â”‚   â””â”€â”€ useTasks.ts              # Task ê´€ë ¨ í›…
â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”‚   â”œâ”€â”€ sessionStore.ts          # ì„¸ì…˜ ìƒíƒœ ê´€ë¦¬
â”‚   â”‚   â”‚   â””â”€â”€ taskStore.ts             # Task ìƒíƒœ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â”œâ”€â”€ session.ts               # ì„¸ì…˜ íƒ€ì… ì •ì˜
â”‚   â”‚   â”‚   â””â”€â”€ task.ts                  # Task íƒ€ì… ì •ì˜
â”‚   â”‚   â””â”€â”€ App.tsx
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ server/                   # Node.js ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ websocket.ts
â”‚   â”‚   â”œâ”€â”€ sessionRegistry.ts           # ì„¸ì…˜ ê´€ë¦¬ (ê¸°ì¡´ agentRegistry í™•ì¥)
â”‚   â”‚   â”œâ”€â”€ taskRegistry.ts              # Task ê´€ë¦¬ (ì‹ ê·œ)
â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ reporter/                 # ì—ì´ì „íŠ¸ ë¦¬í¬í„° í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ reporter.js          # Node.js ë²„ì „
â”‚   â””â”€â”€ reporter.py          # Python ë²„ì „
â”œâ”€â”€ PRD.md
â””â”€â”€ README.md
```

---

## 8. ë§ˆì¼ìŠ¤í†¤

### Phase 1: ê¸°ë³¸ ì¸í”„ë¼ âœ… (ì™„ë£Œ)
- [x] í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •
- [x] WebSocket ì„œë²„ êµ¬í˜„
- [x] ê¸°ë³¸ ì—ì´ì „íŠ¸ ë ˆì§€ìŠ¤íŠ¸ë¦¬
- [x] ë¦¬í¬í„° í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„

### Phase 2: ì¹¸ë°˜ ë³´ë“œ UI âœ… (ì™„ë£Œ)
- [x] ì¹¸ë°˜ ë³´ë“œ ë ˆì´ì•„ì›ƒ
- [x] ì—ì´ì „íŠ¸ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
- [x] ì‹¤ì‹œê°„ ìƒíƒœ ë°˜ì˜
- [x] ê¸°ë³¸ ìŠ¤íƒ€ì¼ë§

### Phase 3: ê³ ê¸‰ ê¸°ëŠ¥ âœ… (ì™„ë£Œ)
- [x] ì—ì´ì „íŠ¸ ê³„ì¸µ êµ¬ì¡° ì‹œê°í™”
- [x] í•„í„°ë§ ë° ê²€ìƒ‰
- [x] ì—ì´ì „íŠ¸ ìƒì„¸ ëª¨ë‹¬
- [x] ë‹¤í¬ ëª¨ë“œ

### Phase 4: í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹ ì „í™˜ (ì‹ ê·œ)
- [ ] Task ë°ì´í„° ëª¨ë¸ ë° íƒ€ì… ì •ì˜
- [ ] TaskRegistry ë°±ì—”ë“œ êµ¬í˜„
- [ ] Task WebSocket ì´ë²¤íŠ¸ êµ¬í˜„
- [ ] ì„¸ì…˜ ëŒ€ì‹œë³´ë“œ UI ì»´í¬ë„ŒíŠ¸
- [ ] Task ì¹¸ë°˜ ë³´ë“œ UI ì»´í¬ë„ŒíŠ¸
- [ ] í•˜ì´ë¸Œë¦¬ë“œ ë ˆì´ì•„ì›ƒ í†µí•©
- [ ] ì„¸ì…˜-Task ì—°ë™ (Progress ìë™ ê³„ì‚°, Recent Events)
- [ ] Reporter í´ë¼ì´ì–¸íŠ¸ í™•ì¥ (Task ìƒì„±/ì™„ë£Œ í›…)

### Phase 5: ì•ˆì •í™”
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”
- [ ] ì„±ëŠ¥ ìµœì í™”
- [ ] ë¬¸ì„œí™”

---

## 9. ìœ„í—˜ ìš”ì†Œ ë° ëŒ€ì‘

| ìœ„í—˜ | ì˜í–¥ë„ | ëŒ€ì‘ ë°©ì•ˆ |
|------|--------|-----------|
| Claude Code hooks ì œì•½ | ë†’ìŒ | íŒŒì¼ ì‹œìŠ¤í…œ ê¸°ë°˜ ëŒ€ì•ˆ êµ¬í˜„ |
| ë‹¤ìˆ˜ ì—ì´ì „íŠ¸ ì„±ëŠ¥ ì €í•˜ | ì¤‘ê°„ | ê°€ìƒí™”ëœ ëª©ë¡ ë Œë”ë§ ì ìš© |
| WebSocket ì—°ê²° ë¶ˆì•ˆì • | ì¤‘ê°„ | ì¬ì—°ê²° ë¡œì§ ë° ìƒíƒœ ë³µêµ¬ êµ¬í˜„ |

---

## 10. ì„±ê³µ ì§€í‘œ

- ì—ì´ì „íŠ¸ ìƒíƒœ ë³€ê²½ ê°ì§€ìœ¨: > 99%
- UI ë°˜ì˜ ì§€ì—° ì‹œê°„: < 1ì´ˆ
- ì‚¬ìš©ì ë§Œì¡±ë„: ì§ê´€ì ì¸ ì—ì´ì „íŠ¸ ìƒíƒœ íŒŒì•… ê°€ëŠ¥
